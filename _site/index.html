<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jeremy F Price">
<title>School Context Opportunity Score (IUI 2030) - School Context Opportuntity Score</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: #EDEBEB;
      }

      .quarto-title-block .quarto-title-banner {
        color: #EDEBEB;
background: #990000;
      }
</style>
<link rel="stylesheet" href="assets/style.css">
</head>
<body>

<div id="quarto-search-results"></div>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">School Context Opportuntity Score</h1>
            <p class="subtitle lead">Documentation for the Indiana University Indianapolis 2030 Strategic Planning Process</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><a href="https://www.jeremyfprice.info/">Jeremy F Price</a> <a href="https://orcid.org/0000-0002-6506-3526" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              IU Indianapolis School of Education
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content"><section id="introduction" class="level1 page-columns page-full"><h1>Introduction</h1>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="assets/service-logo.svg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Service to Our State and Beyond</figcaption></figure>
</div>
</div></div><p>The School Context Opportunity Score (SCOscore) is a measure of potentiality for learners in a school community. It is a composite score that combines multiple factors, particularly structural factors such as race and SES, as well as performance factors such as test scores and graduation pathway completion rates, to provide a more holistic view of school corporations.</p>
<p>The SCOscore was developed as method for identifying and prioritizing P12 schools and school corporations for the <a href="https://strategicplan.iupui.edu/">Indiana University Indianapolis 2030 Strategic Plan</a>. Specifically, SCOscore was developed for <a href="https://strategicplan.iupui.edu/Pillars-Goals-Champions/service-to-state-and-beyond#:~:text=Goal%202%3A%20Engage%20State%20P%2D12%20to%20Strengthen%20Education%20and%20Educational%20Pipelines%20in%20Indiana">Goal 2</a> of the Service to Our State and Beyond Pillar:</p>
<blockquote class="blockquote">
<p>Engage State P-12 to Strengthen Education and Educational Pipelines in Indiana</p>
</blockquote>
</section><section id="requirements" class="level1"><h1>Requirements</h1>
<p>Requirements go here.</p>
<section id="file-structure" class="level2"><h2 class="anchored" data-anchor-id="file-structure">File Structure</h2>
<pre><code>fafi-sna/
┣ assets/                   &lt;- Directory for storing auxiliary files
┃ ┗ fafi-sna-references.bib &lt;- Bibliography for this project in BibTeX format
┃ ┗ theme.css               &lt;- Cascading style sheet for the project
┃ ┗ fafi-sna-logo.png       &lt;- Project logo
┃ ┗ credit.xml              &lt;- Author contributions in a JATS XML file
┣ docs/                     &lt;- Directory for the rendered literate programming file
┃ ┗ index.html              &lt;- Rendered version of the literate programming file
┣ index_cache/              &lt;- Directory used to serve the rendered literate programming file
┣ index_files/              &lt;- Directory used to serve the rendered literate programming file
┣ output/                   &lt;- Target directory for collecting R output files
┃ ┗ plots/                  &lt;- Directory for storing plots in PDF and PNG formats
┃ ┗ csv/                    &lt;- Directory for storing CSV files
┣ R                         &lt;- Directory for storing R scripts
┃ ┗ fafi-sna.R              &lt;- R script distilled from the literate programming file
┣ .gitignore                &lt;- Files and directories to be ignored by Git
┣ .nojekyll                 &lt;- File to tell Github to not use Jekyll
┣ _footer.html              &lt;- The footer for the rendered literate programming file
┣ _site.yml                 &lt;- Configuration file for the rendered literate programming file
┣ CODE_OF_CONDUCT.md        &lt;- Code of Conduct for project contributors
┣ LICENSE                   &lt;- License (MIT) for project
┣ README.md                 &lt;- This file, a general overview of this project
┗ index.Rmd                 &lt;- Literate programming file for the project analysis</code></pre>
</section><section id="data-preparation" class="level2"><h2 class="anchored" data-anchor-id="data-preparation">Data Preparation</h2>
<p>Blah.</p>
<section id="iread-3-test-scores" class="level3"><h3 class="anchored" data-anchor-id="iread-3-test-scores">IREAD-3 Test Scores</h3>
<p>Blah.</p>
<table class="table">
<caption>Graduation Rates spreadsheet format.</caption>
<thead><tr class="header">
<th>corp_id</th>
<th>corp_name</th>
<th>school_id</th>
<th>school_name</th>
<th>iread_rate</th>
</tr></thead>
<tbody><tr class="odd">
<td>number</td>
<td>text</td>
<td>number</td>
<td>text</td>
<td>percent</td>
</tr></tbody>
</table></section><section id="ilearn-6-math-scores" class="level3"><h3 class="anchored" data-anchor-id="ilearn-6-math-scores">ILEARN-6 Math Scores</h3>
<p>Blah.</p>
<table class="table">
<caption>Graduation Rates spreadsheet format.</caption>
<thead><tr class="header">
<th>corp_id</th>
<th>corp_name</th>
<th>school_id</th>
<th>school_name</th>
<th>ilearn_rate</th>
</tr></thead>
<tbody><tr class="odd">
<td>number</td>
<td>text</td>
<td>number</td>
<td>text</td>
<td>percent</td>
</tr></tbody>
</table></section><section id="high-school-graduation-rates" class="level3"><h3 class="anchored" data-anchor-id="high-school-graduation-rates">High School Graduation Rates</h3>
<table class="table">
<caption>Graduation Rates spreadsheet format.</caption>
<thead><tr class="header">
<th>corp_id</th>
<th>corp_name</th>
<th>school_id</th>
<th>school_name</th>
<th>grad_rate</th>
</tr></thead>
<tbody><tr class="odd">
<td>number</td>
<td>text</td>
<td>number</td>
<td>text</td>
<td>percent</td>
</tr></tbody>
</table></section></section></section><section id="literate-code" class="level1"><h1>Literate Code</h1>
<p>Computer scientist Don <span class="citation" data-cites="knuthLiterateProgramming1984">Knuth (<a href="#ref-knuthLiterateProgramming1984" role="doc-biblioref">1984</a>)</span> first coined the term “literate programming” to describe a form of programming that is created as a human-readable narrative. It has been taken up as a format that is rich in comments and documentation to illustrate and illuminate the choices and decisions that were made in the act of programming. Literate code is also an essential aspect of research to promote reproducibility of analysis <span class="citation" data-cites="dekkerFacilitatingReproducibilityCollaboration2018 vassilevLanguageagnosticReproducibleData2016">(<a href="#ref-dekkerFacilitatingReproducibilityCollaboration2018" role="doc-biblioref">Dekker 2018</a>; <a href="#ref-vassilevLanguageagnosticReproducibleData2016" role="doc-biblioref">Vassilev et al. 2016</a>)</span>. In this case, as a community-engaged study, we are more interested in exemplifying trust, transparency, and accountability <span class="citation" data-cites="chouSupportingEthicalPractice2020 mullinsAdvancingCommunityengagedResearch2020 sabatelloDataSharingCommunityengaged2022a">(<a href="#ref-chouSupportingEthicalPractice2020" role="doc-biblioref">Chou and Frazier 2020</a>; <a href="#ref-mullinsAdvancingCommunityengagedResearch2020" role="doc-biblioref">Mullins et al. 2020</a>; <a href="#ref-sabatelloDataSharingCommunityengaged2022a" role="doc-biblioref">Sabatello et al. 2022</a>)</span>, literate code provides a clear window for community members and participants into the inner processes of data analysis and visualization methodologies.</p>
<section id="load-libraries" class="level2"><h2 class="anchored" data-anchor-id="load-libraries">Load Libraries</h2>
<p>Libraries are packages that are loaded in to extend the functionality to the base R programming language. The following libraries are utilized:</p>
<ul>
<li>
<code>readr</code> <span class="citation" data-cites="wickham2023readr">(<a href="#ref-wickham2023readr" role="doc-biblioref">Wickham, Hester, and Bryan 2023</a>)</span> allows for efficient and straightforward reading and writing of local <abbr title="Comma-Separated Values">CSV</abbr> files;</li>
<li>
<code>here</code> <span class="citation" data-cites="muller2020here">(<a href="#ref-muller2020here" role="doc-biblioref">Müller 2020</a>)</span> provides a simple way to find files in folders;</li>
<li>
<code>openxlsx</code> <span class="citation" data-cites="schauberger2023openxlsx">(<a href="#ref-schauberger2023openxlsx" role="doc-biblioref">Schauberger and Walker 2023</a>)</span> provides R with the functionality to write and read Microsoft Excel (<code>.xlsx</code>) files;</li>
<li>
<code>glue</code> <span class="citation" data-cites="hester2022glue">(<a href="#ref-hester2022glue" role="doc-biblioref">Hester and Bryan 2022</a>)</span>, <code>tidyr</code> <span class="citation" data-cites="wickham2023tidyr">(<a href="#ref-wickham2023tidyr" role="doc-biblioref">Wickham, Vaughan, and Girlich 2023</a>)</span>, <code>dplyr</code> <span class="citation" data-cites="wickham2023dplyr">(<a href="#ref-wickham2023dplyr" role="doc-biblioref">Wickham et al. 2023</a>)</span>, and <code>stringr</code> <span class="citation" data-cites="wickham2022stringr">(<a href="#ref-wickham2022stringr" role="doc-biblioref">Wickham 2022</a>)</span> are used to process and clean data;</li>
<li>
<code>showtext</code> <span class="citation" data-cites="qiu2023showtext">(<a href="#ref-qiu2023showtext" role="doc-biblioref">Qiu and software 2023</a>)</span> allows Google Fonts to be loaded and displayed.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/">here</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ycphs.github.io/openxlsx/index.html">openxlsx</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidyverse/glue">glue</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext">showtext</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="set-constants" class="level2"><h2 class="anchored" data-anchor-id="set-constants">Set Constants</h2>
<p>Constants are values that are used across the entire R script. The following constants are set for later use:</p>
<ul>
<li>
<code>focus_year</code> is the year for the generation of the SCOscores;</li>
<li>
<code>state_3rd_proficiency</code> is the statewide mean for the focus year of 3rd graders showing proficiency on the IREAD-3 standardized exam;</li>
<li>
<code>state_6th_proficiency</code> is the statewide mean for the focus year of 6th graders meeting their growth targets on the math ILEARN standardized exam;</li>
<li>
<code>state_gpc</code> is the statewide mean for the focus year of 12th graders who complete graduation requirements.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">focus_year</span> <span class="op">&lt;-</span> <span class="fl">2023</span></span>
<span><span class="va">state_3rd_proficiency</span> <span class="op">&lt;-</span> <span class="fl">.816</span></span>
<span><span class="va">state_6th_proficiency</span> <span class="op">&lt;-</span> <span class="fl">.341</span></span>
<span><span class="va">state_gpc</span> <span class="op">&lt;-</span> <span class="fl">.864</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These metrics are determined by the state on an annual basis and can be obtained from the Indiana Department of Education’s <a href="https://indianagps.doe.in.gov/#skipOverview">Indiana Graduates Prepared to Succeed</a> website.</p>
<p><strong>They should be updated each year.</strong></p>
</section><section id="define-functions" class="level2"><h2 class="anchored" data-anchor-id="define-functions">Define Functions</h2>
<p>Functions provide “shortcodes” for repeating calculations or analyses multiple times with different variables, datasets, or networks.</p>
<p>The <code>prune_frame</code> function removes any rows with missing values (<code>NA</code>). This function also filters out private, charter, and other schools that are not required to submit data to the Indiana Department of Education, nor are they accountable to the communities they serve.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">prune_frame</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">working_frame</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">working_frame</span> <span class="op">|&gt;</span></span>
<span>    <span class="co"># Remove NA's</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="co"># Keep only public schools</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">corp_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">crosswalk_frame</span><span class="op">$</span><span class="va">corp_id</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>set_numeric_ids</code> function sets the School Corporation ID and School ID columns as numeric for consistency, so that all IDs in all dataframes are set consistently.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">set_numeric_ids</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">working_frame</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">working_frame</span> <span class="op">|&gt;</span></span>
<span>    <span class="co"># Set the School Corporation ID column to numeric</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>      corp_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">corp_id</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="co"># Set the School ID column to numeric</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>      school_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">school_id</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="read-and-process-data-files" class="level2"><h2 class="anchored" data-anchor-id="read-and-process-data-files">Read and Process Data Files</h2>
<p>The data files need to be read in to R and processed in a consistent manner so that School Context Opportunity Scores can be calculated successfully.</p>
<section id="lea-id-school-corporation-id-crosswalk" class="level3"><h3 class="anchored" data-anchor-id="lea-id-school-corporation-id-crosswalk">LEA ID-School Corporation ID Crosswalk</h3>
<p>The Urban Centric Locale data is set by the Federal, rather than the Indiana, Department of Education. The Federal <abbr title="Department of Education">DOE</abbr> utilizes a standardized <abbr title="Local Educational Authority">LEA</abbr> ID while the <abbr title="Indiana Department of Education">IDOE</abbr> utilizes their own School Corporation ID.</p>
<p>This code block creates a <a href="https://guides.lib.utexas.edu/metadata-basics/crosswalks">crosswalk</a> to bridge the DOE’s LEA ID and the IDOE’s School Corporation ID.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#   ____________________________________________________________________________</span></span>
<span><span class="co">#   Create Federal-IDOE Crosswalk                                           ####</span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Load Locale File                                                        ####</span></span>
<span><span class="co">##  The Locale File is directly from a Federal DOE database and includes</span></span>
<span><span class="co">##  the Federal LEA ID codes, rather than the Indiana DOE School</span></span>
<span><span class="co">##  Corporation codes. lea_name is renamed to corp_name for consistency.</span></span>
<span><span class="va">locale_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span></span>
<span>    <span class="st">"data"</span>,</span>
<span>    <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{focus_year}-in-school-corp-locale.csv"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>corp_name <span class="op">=</span> <span class="va">lea_name</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Load IREAD File                                                         ####</span></span>
<span><span class="co">##  The IREAD File contains, on the otherhand, the Indiana DOE School</span></span>
<span><span class="co">##  Corporation codes, but not the Federal DOE LEA codes.</span></span>
<span><span class="va">iread_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span></span>
<span>    <span class="st">"data"</span>,</span>
<span>    <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{focus_year}-in-school-iread3.csv"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Create Crosswalk Frame                                                  ####</span></span>
<span><span class="co">##  The two dataframes are joined together by matching the School</span></span>
<span><span class="co">##  Corporation name so that the IDOE and USDOE codes match. This can be</span></span>
<span><span class="co">##  used to allow different sources of data sets to align with one another.</span></span>
<span><span class="va">crosswalk_frame</span> <span class="op">&lt;-</span> <span class="va">iread_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">iread_rate</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">locale_frame</span>, by <span class="op">=</span> <span class="st">"corp_name"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">corp_id</span>, <span class="va">school_id</span>, <span class="va">leaid</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="urban-centric-locale" class="level3"><h3 class="anchored" data-anchor-id="urban-centric-locale">Urban-Centric Locale</h3>
<p>The National Center for Education Statistics provides a framework for recognizing the “locale” of a school corporation, from <em>city</em> to <em>suburb</em> to <em>town</em> to <em>rural.</em> The framework is the <a href="https://nces.ed.gov/pubs2007/ruraled/exhibit_a.asp">Urban-Centric Locale Categories</a>, and the school corporation designations are included here for accountability purposes.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#   ____________________________________________________________________________</span></span>
<span><span class="co">#   Process Locale Frame                                                    ####</span></span>
<span><span class="co">#   Processing on the locale frame is completed by adding the IDOE</span></span>
<span><span class="co">#   identifiers on to the frame and ensuring the School ID and School</span></span>
<span><span class="co">#   Corporation ID columns are numeric for consistency.</span></span>
<span><span class="va">locale_frame</span> <span class="op">&lt;-</span> <span class="va">locale_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">crosswalk_frame</span>, by <span class="op">=</span> <span class="st">"leaid"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">leaid</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_numeric_ids</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="demographics" class="level3"><h3 class="anchored" data-anchor-id="demographics">Demographics</h3>
<p>Demographic indicators—specifically the percentage of students who are a part of underrepresented racial minority communities and the percentage of students who receive free and reduced lunch—are critical components of the School Context Opportunity Score. They provide a measure of the potentiality of students who are often held back because of existing structural barriers and inequalities.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#   ____________________________________________________________________________</span></span>
<span><span class="co">#   Load and Process Demographics File                                      ####</span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Load Demographics File                                                  ####</span></span>
<span><span class="co">##  The Demographics File is loaded and any blank or "omitted" ("***")</span></span>
<span><span class="co">##  values are replaced with NA for easier processing.</span></span>
<span><span class="va">read_demographics_frame</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{focus_year}-in-school-demographics.csv"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    col_names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"***"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co">##  The Crosswalk Frame is used to only retain the school corporations that</span></span>
<span>  <span class="co">##  are of interest (excluding private, charter, etc., schools) and that</span></span>
<span>  <span class="co">##  consistently report data and are fully accountable to the communities</span></span>
<span>  <span class="co">##  they serve.</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">corp_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">crosswalk_frame</span><span class="op">$</span><span class="va">corp_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co">##  Any NA is then replaced with 0 in the demographics columns.</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span></span>
<span>    .cols <span class="op">=</span> <span class="va">aina</span><span class="op">:</span><span class="va">nhpi</span>,</span>
<span>    .fns <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="fl">0</span>, <span class="va">.x</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Process Demographics Frame                                              ####</span></span>
<span><span class="co">##  An "underrepresented racial minority" column is created by calculating</span></span>
<span><span class="co">##  the proportion of non-white students in the school. Similarly, a Free</span></span>
<span><span class="co">##  and Reduced Lunch proportion is also calculated.</span></span>
<span><span class="va">process_demographics_frame</span> <span class="op">&lt;-</span> <span class="va">read_demographics_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    urm_percent <span class="op">=</span></span>
<span>      <span class="op">(</span><span class="va">aina</span> <span class="op">+</span></span>
<span>        <span class="va">asian</span> <span class="op">+</span></span>
<span>        <span class="va">black</span> <span class="op">+</span></span>
<span>        <span class="va">latine</span> <span class="op">+</span></span>
<span>        <span class="va">multiracial</span> <span class="op">+</span></span>
<span>        <span class="va">nhpi</span><span class="op">)</span> <span class="op">/</span></span>
<span>        <span class="va">enrollment</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    frl_percent <span class="op">=</span> <span class="va">frl</span> <span class="op">/</span> <span class="va">enrollment</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Finalize Demographics Frame                                             ####</span></span>
<span><span class="co">##  Keep only the necessary columns in the dataframe and convert all ID</span></span>
<span><span class="co">##  columns to numeric for consistency.</span></span>
<span><span class="va">demographics_frame</span> <span class="op">&lt;-</span> <span class="va">process_demographics_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span></span>
<span>    <span class="va">corp_id</span>,</span>
<span>    <span class="va">corp_name</span>,</span>
<span>    <span class="va">school_id</span>,</span>
<span>    <span class="va">school_name</span>,</span>
<span>    <span class="va">urm_percent</span>,</span>
<span>    <span class="va">frl_percent</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">prune_frame</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_numeric_ids</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Calculate Demographic Means                                             ####</span></span>
<span><span class="co">##  Means for the demographic categories-underrepresented racial minorities and</span></span>
<span><span class="co">##  free and reduced lunch-are calculated for future use in the counterfactual</span></span>
<span><span class="co">##  analysis.</span></span>
<span><span class="va">urm_percent_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">demographics_frame</span><span class="op">$</span><span class="va">urm_percent</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">frl_percent_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">demographics_frame</span><span class="op">$</span><span class="va">frl_percent</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="rd-grade-iread" class="level3"><h3 class="anchored" data-anchor-id="rd-grade-iread">3rd Grade IREAD</h3>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#   ____________________________________________________________________________</span></span>
<span><span class="co">#   Load and Process IREAD File                                             ####</span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Load IREAD File                                                         ####</span></span>
<span><span class="co">## </span></span>
<span><span class="va">read_iread_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span></span>
<span>    <span class="st">"data"</span>,</span>
<span>    <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{focus_year}-in-school-iread3.csv"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"***"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">prune_frame</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_numeric_ids</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Calculate IREAD Rates                                                   ####</span></span>
<span><span class="va">iread_frame</span> <span class="op">&lt;-</span> <span class="va">read_iread_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>iread_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">iread_rate</span>, end <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Calculate IREAD Mean                                                    ####</span></span>
<span><span class="va">iread_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">iread_frame</span><span class="op">$</span><span class="va">iread_rate</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="th-grade-ilearn" class="level3"><h3 class="anchored" data-anchor-id="th-grade-ilearn">6th Grade ILEARN</h3>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#   ____________________________________________________________________________</span></span>
<span><span class="co">#   Load and Process ILEARN File                                            ####</span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Load ILEARN File                                                        ####</span></span>
<span><span class="va">read_ilearn_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span></span>
<span>    <span class="st">"data"</span>,</span>
<span>    <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{focus_year}-in-school-ilearn6.csv"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"***"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">prune_frame</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_numeric_ids</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Calculate ILEARN Rates                                                  ####</span></span>
<span><span class="va">ilearn_frame</span> <span class="op">&lt;-</span> <span class="va">read_ilearn_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>ilearn_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">ilearn_rate</span>, end <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Calculate ILEARN Mean                                                   ####</span></span>
<span><span class="va">ilearn_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ilearn_frame</span><span class="op">$</span><span class="va">ilearn_rate</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="graduation-pathways-completion" class="level3"><h3 class="anchored" data-anchor-id="graduation-pathways-completion">Graduation Pathways Completion</h3>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#   ____________________________________________________________________________</span></span>
<span><span class="co">#   Load and Process Graduation Pathways Completion File                    ####</span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Load Graduation Pathways Completion File                                ####</span></span>
<span><span class="va">read_grad_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span></span>
<span>    <span class="st">"data"</span>,</span>
<span>    <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{focus_year}-in-school-gcr.csv"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"***"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">prune_frame</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_numeric_ids</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Process Graduation Completion Rates File                                ####</span></span>
<span><span class="va">grad_frame</span> <span class="op">&lt;-</span> <span class="va">read_grad_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>grad_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub</a></span><span class="op">(</span><span class="va">grad_rate</span>, end <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##  ............................................................................</span></span>
<span><span class="co">##  Calculate Graduate Pathways Completion Rate Mean                        ####</span></span>
<span><span class="va">grad_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">grad_frame</span><span class="op">$</span><span class="va">grad_rate</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="calculate-scoscore" class="level2"><h2 class="anchored" data-anchor-id="calculate-scoscore">Calculate SCOscore</h2>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">scoscore_frame</span> <span class="op">&lt;-</span> <span class="va">locale_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span></span>
<span>    <span class="va">demographics_frame</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"corp_id"</span>, <span class="st">"school_id"</span><span class="op">)</span>,</span>
<span>    suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".y"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span></span>
<span>    <span class="va">iread_frame</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"corp_id"</span>, <span class="st">"school_id"</span><span class="op">)</span>,</span>
<span>    suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".y"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span></span>
<span>    <span class="va">ilearn_frame</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"corp_id"</span>, <span class="st">"school_id"</span><span class="op">)</span>,</span>
<span>    suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".y"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span></span>
<span>    <span class="va">grad_frame</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"corp_id"</span>, <span class="st">"school_id"</span><span class="op">)</span>,</span>
<span>    suffix<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">".y"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">".y"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">corp_name</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>iread_rate_adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>    <span class="va">iread_rate</span> <span class="op">&lt;</span> <span class="va">state_3rd_proficiency</span>,</span>
<span>    <span class="op">(</span><span class="va">state_3rd_proficiency</span> <span class="op">-</span> <span class="va">iread_rate</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    <span class="fl">0</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>ilearn_rate_adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>    <span class="va">ilearn_rate</span> <span class="op">&lt;</span> <span class="va">state_6th_proficiency</span>,</span>
<span>    <span class="op">(</span><span class="va">state_6th_proficiency</span> <span class="op">-</span> <span class="va">ilearn_rate</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    <span class="fl">0</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>grad_rate_adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>    <span class="va">grad_rate</span> <span class="op">&lt;</span> <span class="va">state_gpc</span>,</span>
<span>    <span class="op">(</span><span class="va">state_gpc</span> <span class="op">-</span> <span class="va">grad_rate</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    <span class="fl">0</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    adj_academic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">iread_rate_adj</span>, <span class="va">ilearn_rate_adj</span>, <span class="va">grad_rate_adj</span><span class="op">)</span>,</span>
<span>        na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span></span>
<span>    <span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"iread"</span>,</span>
<span>      <span class="st">"ilearn"</span>,</span>
<span>      <span class="st">"grad"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    scoScore <span class="op">=</span> <span class="op">(</span></span>
<span>      <span class="op">(</span><span class="op">(</span><span class="va">urm_percent</span> <span class="op">*</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">frl_percent</span> <span class="op">*</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">adj_academic</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rounded_up <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>    <span class="va">scoScore</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">scoScore</span> <span class="op">&gt;=</span> <span class="fl">0.970</span>,</span>
<span>    <span class="cn">TRUE</span>,</span>
<span>    <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>scoScore <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>    <span class="va">scoScore</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">scoScore</span> <span class="op">&gt;=</span> <span class="fl">0.970</span>,</span>
<span>    <span class="fl">1</span>,</span>
<span>    <span class="va">scoScore</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>counter_factual <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Conduct a counterfactual analysis to ensure fairness for school corporations. If a school corporation has an adjusted academic score <strong>above</strong> mean academic score + 1 standard deviation then adjust the non-white and free and reduced lunch percents to the state average if these are <strong>lower</strong> than the state mean. This gives some school corporations a little “bump” so that it cannot be said that any group is given an “unfair” advantage. If the newly calculated SCOscore is then &gt;=1, then keep that counterfactual score.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">adj_ac_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">scoscore_frame</span><span class="op">$</span><span class="va">adj_academic</span><span class="op">)</span>,</span>
<span>  <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">adj_ac_sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">scoscore_frame</span><span class="op">$</span><span class="va">adj_academic</span><span class="op">)</span>,</span>
<span>  <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">adj_ac_cutoff</span> <span class="op">&lt;-</span> <span class="va">adj_ac_mean</span> <span class="op">+</span> <span class="va">adj_ac_sd</span></span>
<span></span>
<span><span class="va">whatif_frame</span> <span class="op">&lt;-</span> <span class="va">scoscore_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">adj_academic</span> <span class="op">&gt;=</span> <span class="va">adj_ac_cutoff</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">scoScore</span> <span class="op">&lt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">scoScore</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>urm_percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>    <span class="va">urm_percent</span> <span class="op">&lt;</span> <span class="va">urm_percent_mean</span>,</span>
<span>    <span class="va">urm_percent_mean</span>,</span>
<span>    <span class="va">urm_percent</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>frl_percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span></span>
<span>    <span class="va">frl_percent</span> <span class="op">&lt;</span> <span class="va">frl_percent_mean</span>,</span>
<span>    <span class="va">frl_percent_mean</span>,</span>
<span>    <span class="va">frl_percent</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    scoScore <span class="op">=</span> <span class="op">(</span></span>
<span>      <span class="op">(</span><span class="op">(</span><span class="va">urm_percent</span> <span class="op">*</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">frl_percent</span> <span class="op">*</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">adj_academic</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    scoScore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">scoScore</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rounded_up <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>    <span class="va">scoScore</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">scoScore</span> <span class="op">&gt;=</span> <span class="fl">0.970</span>,</span>
<span>    <span class="cn">TRUE</span>,</span>
<span>    <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>scoScore <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>    <span class="va">scoScore</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">scoScore</span> <span class="op">&gt;=</span> <span class="fl">0.970</span>,</span>
<span>    <span class="fl">1</span>,</span>
<span>    <span class="va">scoScore</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">scoScore</span> <span class="op">&gt;=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    counter_factual <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span></span>
<span>    <span class="va">corp_id</span>,</span>
<span>    <span class="va">school_id</span>,</span>
<span>    <span class="va">scoScore</span>,</span>
<span>    <span class="va">rounded_up</span>,</span>
<span>    <span class="va">counter_factual</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">scoscore_frame</span> <span class="op">&lt;-</span> <span class="va">scoscore_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">whatif_frame</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"corp_id"</span>, <span class="st">"school_id"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>counter_factual <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">counter_factual.y</span><span class="op">)</span>,</span>
<span>                                   <span class="va">counter_factual.y</span>,</span>
<span>                                   <span class="va">counter_factual.x</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rounded_up <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">rounded_up.y</span><span class="op">)</span>,</span>
<span>                                   <span class="va">rounded_up.y</span>,</span>
<span>                                   <span class="va">rounded_up.x</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>scoScore <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">scoScore.y</span><span class="op">)</span>,</span>
<span>                                   <span class="va">scoScore.y</span>,</span>
<span>                                   <span class="va">scoScore.x</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">".x"</span>, <span class="st">".y"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">scoscore_frame</span> <span class="op">&lt;-</span> <span class="va">scoscore_frame</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span></span>
<span>    <span class="va">corp_id</span>,</span>
<span>    <span class="va">school_id</span>,</span>
<span>    <span class="va">corp_name</span>,</span>
<span>    <span class="va">school_name</span>,</span>
<span>    <span class="va">urban_centric_locale</span>,</span>
<span>    <span class="va">urm_percent</span>,</span>
<span>    <span class="va">frl_percent</span>,</span>
<span>    <span class="va">adj_academic</span>,</span>
<span>    <span class="va">scoScore</span>,</span>
<span>    <span class="va">rounded_up</span>,</span>
<span>    <span class="va">counter_factual</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span></span>
<span>    <span class="va">corp_id</span>,</span>
<span>    <span class="va">school_id</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/write.xlsx.html">write.xlsx</a></span><span class="op">(</span></span>
<span>  <span class="va">scoscore_frame</span>,</span>
<span>  <span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span></span>
<span>    <span class="st">"output"</span>,</span>
<span>    <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"{focus_year}-in-scoscore-schools.xlsx"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  colNames <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><div id="quarto-appendix" class="default"><section id="land-acknowledgement" class="level2 appendix"><h2 class="anchored quarto-appendix-heading">Land Acknowledgement</h2><div class="quarto-appendix-contents">
<p>Indiana University Indianapolis acknowledges our location on the traditional and ancestral territory of the Miami, Potawatomi and Shawnee people. We honor the heritage of Native peoples, what they teach us about the stewardship of the earth and their continuing efforts today to protect the planet.</p>
<p>Founded in 1969, Indiana University Indianapolis stands on the historic homelands of Native peoples and, more recently, that of a vibrant Black community, also displaced. As the present stewards of the land, we honor them all as we live, work and study at Indiana University Indianapolis.</p>
</div></section><section id="session-information" class="level2 appendix"><h2 class="anchored quarto-appendix-heading">Session Information</h2><div class="quarto-appendix-contents">
<p>Session information is provided for reproducibility purposes.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">sessioninfo</span><span class="fu">::</span><span class="fu"><a href="https://r-lib.github.io/sessioninfo/reference/session_info.html">session_info</a></span><span class="op">(</span>pkgs <span class="op">=</span> <span class="st">"attached"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.3.1 (2023-06-16)
 os       macOS Sonoma 14.0
 system   aarch64, darwin20
 ui       X11
 language (EN)
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       America/Indiana/Indianapolis
 date     2023-10-15
 pandoc   3.1.8 @ /opt/homebrew/bin/ (via rmarkdown)

─ Packages ───────────────────────────────────────────────────────────────────
 package    * version date (UTC) lib source
 dplyr      * 1.1.3   2023-09-03 [1] CRAN (R 4.3.0)
 glue       * 1.6.2   2022-02-24 [1] CRAN (R 4.3.0)
 here       * 1.0.1   2020-12-13 [1] CRAN (R 4.3.0)
 openxlsx   * 4.2.5.2 2023-02-06 [1] CRAN (R 4.3.0)
 readr      * 2.1.4   2023-02-10 [1] CRAN (R 4.3.0)
 showtext   * 0.9-6   2023-05-03 [1] CRAN (R 4.3.0)
 showtextdb * 3.0     2020-06-04 [1] CRAN (R 4.3.0)
 stringr    * 1.5.0   2022-12-02 [1] CRAN (R 4.3.0)
 sysfonts   * 0.8.8   2022-03-13 [1] CRAN (R 4.3.0)
 tidyr      * 1.3.0   2023-01-24 [1] CRAN (R 4.3.0)

 [1] /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>



</div></section><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-chouSupportingEthicalPractice2020" class="csl-entry" role="listitem">
Chou, Tommy, and Stacy L. Frazier. 2020. <span>“Supporting Ethical Practice in Community-Engaged Research with <span>4R</span>: <span>Respond</span>, <span>Record</span>, <span>Reflect</span>, and <span>Revise</span>.”</span> <em>Ethics &amp; Behavior</em> 30 (5): 311–25. <a href="https://doi.org/10.1080/10508422.2019.1645665">https://doi.org/10.1080/10508422.2019.1645665</a>.
</div>
<div id="ref-dekkerFacilitatingReproducibilityCollaboration2018" class="csl-entry" role="listitem">
Dekker, Harrison. 2018. <span>“Facilitating <span>Reproducibility</span> and <span>Collaboration</span> with <span>Literate</span> <span>Programming</span>.”</span>
</div>
<div id="ref-hester2022glue" class="csl-entry" role="listitem">
Hester, Jim, and Jennifer Bryan. 2022. <em>Glue: Interpreted String Literals</em>. <a href="https://CRAN.R-project.org/package=glue">https://CRAN.R-project.org/package=glue</a>.
</div>
<div id="ref-knuthLiterateProgramming1984" class="csl-entry" role="listitem">
Knuth, D. E. 1984. <span>“Literate <span>Programming</span>.”</span> <em>The Computer Journal</em> 27 (2): 97–111. <a href="https://doi.org/10.1093/comjnl/27.2.97">https://doi.org/10.1093/comjnl/27.2.97</a>.
</div>
<div id="ref-muller2020here" class="csl-entry" role="listitem">
Müller, Kirill. 2020. <em>Here: A Simpler Way to Find Your Files</em>. <a href="https://CRAN.R-project.org/package=here">https://CRAN.R-project.org/package=here</a>.
</div>
<div id="ref-mullinsAdvancingCommunityengagedResearch2020" class="csl-entry" role="listitem">
Mullins, C. Daniel, Sarah Tanveer, Gail Graham, and Claudia Rose Baquet. 2020. <span>“Advancing Community-Engaged Research: Increasing Trustworthiness Within Community-Academic Partnerships.”</span> Future Medicine.
</div>
<div id="ref-qiu2023showtext" class="csl-entry" role="listitem">
Qiu, Yixuan, and authors/contributors of the included software. 2023. <em>Showtext: Using Fonts More Easily in r Graphs</em>. <a href="https://CRAN.R-project.org/package=showtext">https://CRAN.R-project.org/package=showtext</a>.
</div>
<div id="ref-sabatelloDataSharingCommunityengaged2022a" class="csl-entry" role="listitem">
Sabatello, Maya, Daphne O. Martschenko, Mildred K. Cho, and Kyle B. Brothers. 2022. <span>“Data Sharing and Community-Engaged Research.”</span> <em>Science</em> 378 (6616): 141–43. <a href="https://doi.org/10.1126/science.abq6851">https://doi.org/10.1126/science.abq6851</a>.
</div>
<div id="ref-schauberger2023openxlsx" class="csl-entry" role="listitem">
Schauberger, Philipp, and Alexander Walker. 2023. <em>Openxlsx: Read, Write and Edit Xlsx Files</em>. <a href="https://CRAN.R-project.org/package=openxlsx">https://CRAN.R-project.org/package=openxlsx</a>.
</div>
<div id="ref-vassilevLanguageagnosticReproducibleData2016" class="csl-entry" role="listitem">
Vassilev, Boris, Riku Louhimo, Elina Ikonen, and Sampsa Hautaniemi. 2016. <span>“Language-Agnostic Reproducible Data Analysis Using Literate Programming.”</span> <em>Plos One</em> 11 (10): e0164023. <a href="https://doi.org/10.1371/journal.pone.0164023">https://doi.org/10.1371/journal.pone.0164023</a>.
</div>
<div id="ref-wickham2022stringr" class="csl-entry" role="listitem">
Wickham, Hadley. 2022. <em>Stringr: Simple, Consistent Wrappers for Common String Operations</em>. <a href="https://CRAN.R-project.org/package=stringr">https://CRAN.R-project.org/package=stringr</a>.
</div>
<div id="ref-wickham2023dplyr" class="csl-entry" role="listitem">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-wickham2023readr" class="csl-entry" role="listitem">
Wickham, Hadley, Jim Hester, and Jennifer Bryan. 2023. <em>Readr: Read Rectangular Text Data</em>. <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>.
</div>
<div id="ref-wickham2023tidyr" class="csl-entry" role="listitem">
Wickham, Hadley, Davis Vaughan, and Maximilian Girlich. 2023. <em>Tidyr: Tidy Messy Data</em>. <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>.
</div>
</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">https://creativecommons.org/licenses/by-sa/4.0/</a></div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>